#:include assets\kv_files\utils.kv
#:include assets\kv_files\popups.kv
#:include math


<PlayScreen>:

    id: play_screen

    points_lbl: points_label_id
    board_widget: board_widget_id

    time_lbl: time_label_id
    time_button: time_button_id
    time_color: time_label_color_id

    canvas:
        Rectangle:
            id: back_image
            source:"assets\\images\\cristo.png"
            pos:self.pos
            size:self.size

    # container
    BoxLayout:
        orientation: 'vertical'
        pos: play_screen.width * 0.025, play_screen.height * 0.025
        size_hint: [0.95, 0.95]


        # top menu (menu, time and help)
        BoxLayout:
            id: top_menu
            orientation: 'horizontal'
            size_hint: [1, 0.2]
            spacing: top_menu.width * 0.02

            Button:
                id: menu_button
                size_hint:[0.2, 1]
                font_name: "assets\\fonts\\fontawesome-webfont.ttf"
                text: ""
                font_size: min(menu_button.width,menu_button.height) * 0.4

                canvas.before:
                    Color:
                        rgba: (1, 1, 1, 0.35)
                    Line:
                        circle: (menu_button.center_x, menu_button.center_y, min(menu_button.width,menu_button.height)  * 0.47)
                        width: min(3, min(menu_button.width, menu_button.height) * 0.05)

                # invisible background
                background_color: [0] * 4

                on_press: app.screen_manager.current = 'menu'

            # time label
            BoxLayout:
                # take all the available space
                size_hint:[1, 1]

                id: time_label_color_id

                canvas.before:
                    Color:
                        id: time_label_color_id
                        rgba: [78.0 / 200, 220.0 / 255, 5.0 / 255, 1]

                    Rectangle:
                        pos: self.pos
                        size: self.size

                # pause time button
                Button:
                    id: time_button_id
                    size_hint:[0.2,1]
                    font_name: "assets\\fonts\\fontawesome-webfont.ttf"
                    text: ""

                    # invisible background
                    background_color: [0] * 4

                    on_press: root.switch_pause_state()

                Label:
                    id: time_label_id
                    text: "00:00"
                    halign: 'center'

            # display help
            Button:
                id: help_button_id

                size_hint:[0.2, 1]

                # invisible background
                background_color: [0] * 4

                canvas.before:
                    Color:
                        rgba: (1, 1, 1, 0.35)
                    Line:
                        circle: (help_button_id.center_x, help_button_id.center_y, min(help_button_id.width, help_button_id.height)   * 0.47)
                        width: min(3, min(help_button_id.width, help_button_id.height) * 0.05)

                font_name: "assets\\fonts\\fontawesome-webfont.ttf"
                font_size: min(help_button_id.width,help_button_id.height) * 0.4
                text: ""


                on_press: root.switch_pause_state()

        # game board
        FloatLayout:
            id: board_widget_id
            size_hint:[1, 0.55]
            spacing: self.width * 0.01

        # points hints and lives
        BoxLayout:
            orientation: 'horizontal'
            size_hint: [1, 0.2]

            BoxLayout:
                orientation: 'vertical'

                canvas.before:
                    Color:
                        rgba: [106.0 / 255, 220.0 / 255, 165.0 / 255, 1]
                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    text: "Money"
                CenteredLabel:
                    id: points_label_id
                    text: "0"

            BoxLayout:
                id:author_button
                orientation: 'vertical'

                canvas.before:
                    Color:
                        rgba: [203.0 / 255, 60.0 / 255, 81.0 / 255, 1]

                    Rectangle:
                        pos: author_button.pos[0] + 5 , author_button.pos[1] + 5
                        size: author_button.width - 10, author_button.height - 10
                canvas:
                    Color:
                        rgba: [1, 1, 1, 0.1]
                    Line:
                        rounded_rectangle: (author_button.pos[0], author_button.pos[1], author_button.width, author_button.height, 10, 50)
                        width: 5

                Label:
                    text: "Lives"
                CenteredLabel:
                    id: lives_label_id
                    text: "0"

            BoxLayout:
                orientation: 'vertical'

                canvas.before:
                    Color:
                        rgba: [131.0 / 255, 60.0 / 255, 203.0 / 255, 1]

                    Rectangle:
                        pos: self.pos
                        size: self.size

                Label:
                    text: "Hints"

                CenteredLabel:
                    id: hints_label_id
                    text: "0"